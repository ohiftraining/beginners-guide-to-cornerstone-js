<body>
  <div id="targetDomElement"></div>

  <!-- Dependencies -->
  <script src="https://unpkg.com/cornerstone-core@2.3.0/dist/cornerstone.js"></script>

  <script>
    // https://github.com/cornerstonejs/cornerstone/blob/master/example/imageloader/index.html
    function createImage(imageId) {
      const rows = 512;
      const columns = 512;
      const minPixelValue = 0;
      const maxPixelValue = 255;
      const pixelValueRange = maxPixelValue - minPixelValue;
      const pixelData = new Uint8ClampedArray(rows * columns);

      // "example-scheme:180"
      const [scheme, uid] = imageId.split(":");

      for (let i = 0; i < pixelData.length; i++) {
        pixelData[i] = uid;
      }

      // VOI - Value of Interest
      // LUT - Lookup Table

      return {
        imageId,

        // Generate LUT
        minPixelValue,
        maxPixelValue,
        slope: 1, // Rescale slope (0028, 1053), linear transform
        intercept: 0, // Rescale Intercept (0028, 1052)
        windowCenter: pixelValueRange / 2,
        windowWidth: pixelValueRange,
        //
        render: cornerstone.renderGrayscaleImage,
        // raw pixel values
        getPixelData: () => pixelData,
        rows,
        columns,
        height: rows,
        width: columns,
        sizeInBytes: rows * columns,
      };
    }

    function loadImageFn(imageId) {
      return {
        promise: new Promise((resolve, reject) => {
          resolve(createImage(imageId));
        }),
        cancelFn: () => {},
      };
    }

    // Enable cornerstone element
    const targetDomElement = document.getElementById("targetDomElement");
    cornerstone.enable(targetDomElement);

    // Register Image Loader
    const exampleScheme = "example-scheme";
    cornerstone.registerImageLoader(exampleScheme, loadImageFn);

    // Load and display image
    const url = `${exampleScheme}:127`;
    cornerstone.loadImage(url).then(function (image) {
      cornerstone.displayImage(targetDomElement, image);
    });
  </script>
</body>
